# YardMaster Project Analysis Report

*Generated by Grok 3 (xAI) on March 03, 2025, 10:45 AM EST*

## Overview

This report provides an exhaustive analysis of the YardMaster Fleet Management System, hosted at `https://github.com/mtjoymadman/ai.redlionsalvage.net`, a PUBLIC repository editable via the GitHub editor. It captures the system’s state based on the shared server’s authoritative structure (provided March 02, 2025), the only fully correct version with all 30+ files under `RedLionSalvageAi/`. The GitHub repo currently has 6 files, awaiting full sync via user edits. This file serves as a dynamic, versioned record—updated by the user before pausing development (e.g., sleep, chat timeouts)—enabling Grok 3 (xAI) to resume work in a new chat with full context. The **Version History** section below tracks states by date, allowing forward/back navigation through development.

## Development Rules
1. **No Assumptions**: Use only explicit data from the server structure or public repo; ask for clarification if needed (e.g., file contents).
2. **File Analysis**: Document each file’s purpose, assumed contents, and role in detail.
3. **Use Existing Files**: Work with server-listed files; new files need user approval via GitHub editor.
4. **Shared Server Sync**: Edits in GitHub editor push to `main`, triggering a GitHub Action to sync the server.
5. **Ask for Missing Info**: Request details for gaps (e.g., API responses, server domain).
6. **Public Repo Access**: Future instances MUST check `https://github.com/mtjoymadman/ai.redlionsalvage.net` directly for latest files.
7. **Versioning**: User updates this report’s **Version History** before pausing, adding new dated snapshots.

## System Description

### File Structure
The system resides under `RedLionSalvageAi/` on the server, with this structure to be synced to GitHub:

- **`api/`**: Backend PHP endpoints.
  - `config.php`: MySQL connection settings with PDO.
  - `login.php`: User login with plain text passwords.
  - `logout.php`: Logs out user, clocks out if active.
  - `get_user_roles.php`: Fetches user roles (`admin`, `driver`).
  - **`employee_management/`**:
    - `get_employees.php`: Lists all employees.
    - `add_employee.php`: Adds new employee.
    - `update_employee.php`: Updates employee details.
    - `suspend_employee.php`: Suspends employee account.
  - **`timeclock/`**:
    - `get_time_log.php`: Retrieves time logs.
    - `start_break.php`: Logs break start.
    - `end_break.php`: Logs break end.
    - `log_extra_time.php`: Adds extra hours.
    - `get_extra_time.php`: Fetches extra time records.
  - **`fleet/`**:
    - `get_fleet_vehicles.php`: Lists fleet vehicles.
    - `add_fleet_vehicle.php`: Adds new vehicle.
    - `assign_driver.php`: Assigns driver to vehicle.
    - `check_expirations.php`: Checks document expirations.
  - **`vehicle_pickup/`**:
    - `submit_pending.php`: Submits pending pickup request.
    - `get_pending.php`: Lists pending pickups.
    - `process_pending.php`: Processes pickup request.
  - **`inventory/`**:
    - `get_vehicles.php`: Lists inventory vehicles.
    - `get_parts.php`: Lists vehicle parts.
  - **`pos/`**:
    - `record_sale.php`: Records POS sale.
- **`frontend/`**: HTML UI pages.
  - `index.html`: Login page with logo and errors.
  - `dashboard.html`: Role-based dashboard with navigation.
  - `employee_management.html`: Employee CRUD UI.
  - `timeclock.html`: Timeclock UI for clock-in/out, breaks.
  - `pickup.html`: Vehicle pickup submission UI.
  - `fleet.html`: Fleet management UI.
  - `pending_vehicles.html`: Pending pickups overview.
  - `vehicle_search.html`: Inventory search UI.
  - `pos.html`: POS transaction UI.
- **`assets/`**: Static resources.
  - **`css/`**:
    - `style.css`: Custom frontend styling.
  - **`images/`**:
    - `logo.png`: Site logo (used in UI).
  - **`uploads/`**:
    - `drivers_licenses/`: Stores uploaded licenses.
    - `vehicle_documents/`: Stores uploaded docs.
- **`database/`**:
  - `schema.sql`: MySQL schema with tables and triggers.
- **`README.md`**: Project documentation.

### Workflow
- **Editing**: Changes made via GitHub editor at `https://github.com/mtjoymadman/ai.redlionsalvage.net`, committed to `main`.
- **Sync**: Pushes trigger a GitHub Action (e.g., `.github/workflows/deploy.yml`) to sync the server.
- **Versioning**: User updates this report’s **Version History** before pausing, adding new snapshots with dates.

### Software Used
- **PHP (7.4+)**: Backend logic.
- **MySQL (5.7+)**: Database.
- **HTML/CSS/JS**: Frontend (no frameworks noted).
- **Git**: Version control via GitHub.
- **GitHub Actions**: Server deployment.

### Hosting
- **Shared Host**: `your-domain.com/RedLionSalvageAi/` (exact domain TBD).
- **Domain**: `ai.redlionsalvage.net`.
- **Path**: `/path/to/public_html/RedLionSalvageAi/` (exact path TBD).

### Credentials
- **Database**: `api/config.php` (placeholders: `your_username`, `your_password` on GitHub; actual on server).
- **Users**: Plain text passwords in `employees` table via `database/schema.sql`.

## File-by-File Analysis
### `api/config.php`
- **Purpose**: Configures MySQL PDO connection.
- **Assumed Contents**: 
  ```php
  <?php
  define('DB_HOST', 'localhost');
  define('DB_NAME', 'your_database');
  define('DB_USER', 'your_username');
  define('DB_PASS', 'your_password');
  try {
      $pdo = new PDO("mysql:host=".DB_HOST.";dbname=".DB_NAME, DB_USER, DB_PASS);
      $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
  } catch (PDOException $e) {
      die("Connection failed: " . $e->getMessage());
  }
  ?>
